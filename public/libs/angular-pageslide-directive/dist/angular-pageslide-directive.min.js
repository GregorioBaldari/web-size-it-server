/*! angular-pageslide-directive 2015-09-09 */
angular.module("pageslide-directive",[]).directive("pageslide",["$document",function(a){return{restrict:"EAC",transclude:!1,scope:{psOpen:"=?",psAutoClose:"=?",psSide:"@",psSpeed:"@",psClass:"@",psSize:"@",psSqueeze:"@",psCloak:"@",psPush:"@",psContainer:"@",psKeyListener:"@",psBodyClass:"@"},link:function(b,c,d){function e(a){if(i.bodyClass){var b=i.className+"-body",c=new RegExp(" "+b+"-closed| "+b+"-open");l.className=l.className.replace(c,""),l.className+=" "+b+"-"+a}}function f(c,d){if(c&&0!==c.style.width&&0!==c.style.width)switch(d.cloak&&j.css("display","none"),d.side){case"right":c.style.width="0px",d.squeeze&&(l.style.right="0px"),d.push&&(l.style.right="0px",l.style.left="0px");break;case"left":c.style.width="0px",d.squeeze&&(l.style.left="0px"),d.push&&(l.style.left="0px",l.style.right="0px");break;case"top":c.style.height="0px",d.squeeze&&(l.style.top="0px"),d.push&&(l.style.top="0px",l.style.bottom="0px");break;case"bottom":c.style.height="0px",d.squeeze&&(l.style.bottom="0px"),d.push&&(l.style.bottom="0px",l.style.top="0px")}b.psOpen=!1,d.keyListener&&a.off("keydown",h),e("closed")}function g(b,c){if(0!==b.style.width&&0!==b.style.width){switch(c.side){case"right":b.style.width=c.size,c.squeeze&&(l.style.right=c.size),c.push&&(l.style.right=c.size,l.style.left="-"+c.size);break;case"left":b.style.width=c.size,c.squeeze&&(l.style.left=c.size),c.push&&(l.style.left=c.size,l.style.right="-"+c.size);break;case"top":b.style.height=c.size,c.squeeze&&(l.style.top=c.size),c.push&&(l.style.top=c.size,l.style.bottom="-"+c.size);break;case"bottom":b.style.height=c.size,c.squeeze&&(l.style.bottom=c.size),c.push&&(l.style.bottom=c.size,l.style.top="-"+c.size)}setTimeout(function(){c.cloak&&j.css("display","block")},1e3*c.speed),c.keyListener&&a.on("keydown",h),e("open")}}function h(a){var b=27,c=a.keyCode||a.which;c===b&&f(k,i)}var i={};i.side=b.psSide||"right",i.speed=b.psSpeed||"0.5",i.size=b.psSize||"300px",i.zindex=1e3,i.className=b.psClass||"ng-pageslide",i.cloak=b.psCloak&&"false"==b.psCloak.toLowerCase()?!1:!0,i.squeeze=Boolean(b.psSqueeze)||!1,i.push=Boolean(b.psPush)||!1,i.container=b.psContainer||!1,i.keyListener=Boolean(b.psKeyListener)||!1,i.bodyClass=b.psBodyClass||!1,c.addClass(i.className);var j=null,k=null,l=i.container?document.getElementById(i.container):document.body;if(e("closed"),k=c[0],"div"!==k.tagName.toLowerCase()&&"pageslide"!==k.tagName.toLowerCase())throw new Error("Pageslide can only be applied to <div> or <pageslide> elements");if(0===k.children.length)throw new Error("You have to content inside the <pageslide>");switch(j=angular.element(k.children),l.appendChild(k),k.style.zIndex=i.zindex,k.style.position=i.container!==!1?"absolute":"fixed",k.style.width=0,k.style.height=0,k.style.overflow="hidden",k.style.transitionDuration=i.speed+"s",k.style.webkitTransitionDuration=i.speed+"s",k.style.transitionProperty="width, height",i.squeeze&&(l.style.position="absolute",l.style.transitionDuration=i.speed+"s",l.style.webkitTransitionDuration=i.speed+"s",l.style.transitionProperty="top, bottom, left, right"),i.side){case"right":k.style.height=d.psCustomHeight||"100%",k.style.top=d.psCustomTop||"0px",k.style.bottom=d.psCustomBottom||"0px",k.style.right=d.psCustomRight||"0px";break;case"left":k.style.height=d.psCustomHeight||"100%",k.style.top=d.psCustomTop||"0px",k.style.bottom=d.psCustomBottom||"0px",k.style.left=d.psCustomLeft||"0px";break;case"top":k.style.width=d.psCustomWidth||"100%",k.style.left=d.psCustomLeft||"0px",k.style.top=d.psCustomTop||"0px",k.style.right=d.psCustomRight||"0px";break;case"bottom":k.style.width=d.psCustomWidth||"100%",k.style.bottom=d.psCustomBottom||"0px",k.style.left=d.psCustomLeft||"0px",k.style.right=d.psCustomRight||"0px"}b.$watch("psOpen",function(a){a?g(k,i):f(k,i)}),b.$watch("psSize",function(a,b){b!==a&&(i.size=a,g(k,i))}),b.$on("$destroy",function(){l.removeChild(k)}),b.psAutoClose&&(b.$on("$locationChangeStart",function(){f(k,i)}),b.$on("$stateChangeStart",function(){f(k,i)}))}}}]);